#!/bin/bash

set -e

rootdir=$(dirname "$(readlink -f "$0")")/..
mkdir -p "$rootdir/tmp/ranklab-api"

swagger-codegen-cli generate \
  -i http://ranklab-api:8000/openapi.json \
  -o "$rootdir/tmp/ranklab-api" \
  -l typescript-fetch \
  -c "$rootdir/swagger.config.json"

cp "$rootdir/tmp/ranklab-api"/{api.ts,configuration.ts} "$rootdir/src/api"
